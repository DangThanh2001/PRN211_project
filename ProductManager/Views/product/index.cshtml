@using ProductManager.Models
@*
	For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model List<Product>

@await Html.PartialAsync("Header")

<body>
	<div class="container-fluid">
		<div class="row header">

			<div class="text-center col-sm-12">
				<h1>Comicket</h1>
			</div>
		</div>

		@await Html.PartialAsync("Menu")

		@if (!string.IsNullOrEmpty(ViewBag.mess))
		{
			<div class="alert alert-danger text-center" role="alert">
				@ViewBag.mess
			</div>
		}


		<div class="row content">
			<div class="col-sm-1">
			</div>
			<div class="col-sm-10">
				<div>

					<table class="table table-striped">
						<thead>
							<tr>
								<th scope="col">Product</th>
								<th scope="col">Quantity</th>
								<th scope="col">Original Price</th>
								<th scope="col">Sell price</th>
								<th scope="col">status</th>
								<th scope="col">Publisher</th>
								<th scope="col">Action</th>

							</tr>
						</thead>
						<tbody>

							@foreach (Product o in Model)
							{
								<tr>
									<td scope="row"><a class="text-info" href="/Product/detail">@o.ProductName</a></td>
									<td>
										<form action="/product/quantity/@o.ProductId" method="post">
											<div class="input-group mb-3">
												<input type="hidden" name="upPro.ProductId" value="@o.ProductId">
												<input type="number" class="form-control"
												   name="UpPro.Quantity" value="@o.Quantity" aria-label=""
												   aria-describedby="basic-addon2" min="0" max="9999999"
												   @(o.Status == 0 ? "readonly" : "")>

												<div class="input-group-append">
													@if (o.Status == 1)
													{
														<input type="submit" class="btn btn-outline-success my-2 my-sm-0"
													   value="Enter" id="basic-addon2">
													}

												</div>
											</div>

										</form>

									</td>
									<td>@o.OriginalPrice $</td>
									<td>@o.SellPrice $</td>
									<td>
										<span class="@(o.Status == 1 ? "badge badge-success" : "badge badge-danger")">
											@(o.Status == 1 ? "Ready" : "Waiting")
										</span>

									</td>
									<td><a href="#">@o.Publishing.Name</a></td>
									<td>
										<a class="text-info" href="/Product/detail/@o.ProductId">Details</a>
										<br>
										<a class="text-info" href="/Product/status/@o.ProductId">Update</a>
										<br>
										@if(o.Quantity > 0)
										{
											<a class="@(o.Status == 1 ? "text-danger" : "text-success")" href="/product/status/@o.ProductId">Change status</a>
										}
									</td>
								</tr>
							}

						</tbody>
					</table>
				</div>
			</div>
			<div class="col-sm-1">
			</div>
		</div>

		@*	@await Html.PartialAsync("footer")*@

	</div>

	<style>
		.row.content {
			margin: 3em 0px;
		}
	</style>

</body>
</html>

